{
  "version": 3,
  "sources": ["../../../../app/routes/__auth/login.tsx"],
  "sourcesContent": ["import type { ActionArgs, LoaderArgs, V2_MetaFunction } from \"@remix-run/node\";\r\nimport { json, redirect } from \"@remix-run/node\";\r\nimport { Form, Link, useActionData, useSearchParams } from \"@remix-run/react\";\r\nimport * as React from \"react\";\r\n\r\nimport { createUserSession, getUserId } from \"~/session.server\";\r\nimport { verifyLogin } from \"~/models/user.server\";\r\nimport { safeRedirect, validateEmail } from \"~/utils\";\r\n\r\nexport async function loader({ request }: LoaderArgs) {\r\n  const userId = await getUserId(request);\r\n  if (userId) return redirect(\"/\");\r\n  return json({});\r\n}\r\n\r\nexport async function action({ request }: ActionArgs) {\r\n  const formData = await request.formData();\r\n  const email = formData.get(\"email\");\r\n  const password = formData.get(\"password\");\r\n  const redirectTo = safeRedirect(formData.get(\"redirectTo\"), \"/\");\r\n  const remember = formData.get(\"remember\");\r\n\r\n  if (!validateEmail(email)) {\r\n    return json(\r\n      { errors: { email: \"Email is invalid\", password: null } },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  if (typeof password !== \"string\" || password.length === 0) {\r\n    return json(\r\n      { errors: { email: null, password: \"Password is required\" } },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  if (password.length < 8) {\r\n    return json(\r\n      { errors: { email: null, password: \"Password is too short\" } },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  const user = await verifyLogin(email, password);\r\n\r\n  if (!user) {\r\n    return json(\r\n      { errors: { email: \"Invalid email or password\", password: null } },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  return createUserSession({\r\n    request,\r\n    userId: user.id,\r\n    remember: remember === \"on\" ? true : false,\r\n    redirectTo,\r\n  });\r\n}\r\n\r\nconst login = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const redirectTo = searchParams.get(\"redirectTo\") || \"/\";\r\n  const actionData = useActionData<typeof action>();\r\n  const emailRef = React.useRef<HTMLInputElement>(null);\r\n  const passwordRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  React.useEffect(() => {\r\n    if (actionData?.errors?.email) {\r\n      emailRef.current?.focus();\r\n    } else if (actionData?.errors?.password) {\r\n      passwordRef.current?.focus();\r\n    }\r\n  }, [actionData]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-center items-center h-screen bg-indigo-600\">\r\n        <div className=\"w-96 p-6 shadow-purple-950 shadow-2xl bg-white rounded-md \">\r\n          <h1 className=\"text-3xl block text-center font-semibold\">\r\n            <i className=\"fa-solid fa-user\"></i> Login\r\n          </h1>\r\n          <hr className=\"mt-3\" />\r\n          <Form method=\"post\">\r\n            <div className=\"mt-3\">\r\n              <label htmlFor=\"email\" className=\"block text-base mb-2\">\r\n                Email\r\n              </label>\r\n              <input\r\n                className=\"border w-full text-base px-2 py-1 focus:outline-none focus:ring-0 focus:border-gray-600 rounded-sm\"\r\n                placeholder=\"Enter Email\"\r\n                ref={emailRef}\r\n                type=\"text\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n              />\r\n              {actionData?.errors?.email && (\r\n                <div className=\"pt-1 text-red-700\" id=\"email-error\">\r\n                  {actionData.errors.email}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"mt-3\">\r\n              <label htmlFor=\"password\" className=\"block text-base mb-2\">\r\n                Password\r\n              </label>\r\n              <input\r\n                className=\"border w-full text-base px-2 py-1 focus:outline-none focus:ring-0 focus:border-gray-600 rounded-sm\"\r\n                ref={passwordRef}\r\n                placeholder=\"Enter Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                name=\"password\"\r\n              />\r\n              {actionData?.errors?.password && (\r\n                <div className=\"pt-1 text-red-700\" id=\"password-error\">\r\n                  {actionData.errors.password}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex justify-between my-3 items-center\">\r\n              <div>\r\n                <input type=\"checkbox\" className=\"p-20\" />\r\n                <label>Remember Me?</label>\r\n              </div>\r\n              <div>\r\n                <a href=\"#\" className=\"text-indigo-800 font-semibold\">\r\n                  Forget Password?\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-5\">\r\n              <input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\r\n              <button\r\n                type=\"submit\"\r\n                className=\"text-center bg-indigo-800 text-white w-full py-1 rounded-md border-2 border-indigo-700 hover:bg-white hover:text-indigo-800 font-semibold active:shadow-[inset_1px_5px_50px_-15px_rgba(1,1,1,0.5)]\"\r\n              >\r\n                Login\r\n              </button>\r\n            </div>\r\n            <div className=\"mt-5 flex justify-end font-semibold\">\r\n              <span>\r\n                I don't have acount?{\" \"}\r\n                <Link to=\"/register\" className=\"text-blue-900\">\r\n                  Register\r\n                </Link>\r\n              </span>\r\n            </div>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default login;\r\n"],
  "mappings": "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",
  "names": ["_a", "_b"]
}
